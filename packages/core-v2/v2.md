# Bloom Core V2

> Framework-agnostic authentication with Web Standard Request/Response, path-based hooks, and pluggable adapters.

**Status:** Active Development
**Date:** October 2025

---

## Completed

**Core:**
- Zod v4 schemas (User, Session, Storage)
- Crypto utilities (argon2id hashing, token generation)
- Framework-agnostic headers (8 frameworks: Next, Express, Astro, SvelteKit, Nuxt, Hono, Fastify, Elysia)

**Adapters:**
- Database: Drizzle, Kysely, Prisma, MongoDB
- Storage: Memory, Redis

**Hooks:**
- Path-based before/after hooks (e.g., `/register:before`, `/login:after`)
- Map-based storage for O(1) lookups

**Handler:**
- Router with path matching (exact, params, wildcard)
- Web Standard Request â†’ Response
- Rate limiting (IP-based, per-path rules)

**Auth API:**
- POST `/register`, `/login`, `/logout`
- GET `/session`, `/sessions`
- DELETE `/sessions/:id`, `/sessions`
- POST `/send-verification-email`, `/verify-email`, `/request-password-reset`, `/reset-password`
- Server API: `auth.api.getSession()`

**Tests:** 133 passing (15 files)

---

## Remaining

- Plugin system (custom routes via router)
- Framework adapters (Next.js, Express)
- Client library (React, Vue, Svelte)

---

## Architecture Vision

### Session Caching
```typescript
const auth = bloomAuth({
  adapter: drizzleAdapter(db),
  storage: redisStorage(redis),
  session: {
    cookieCache: { maxAge: 300 }
  }
})
```

### Client Library
```typescript
import { createAuthClient } from '@bloom/react'

const client = createAuthClient()
const { data: session } = client.useSession()
```

### Plugin System
```typescript
const oauthPlugin: BloomPlugin = {
  id: 'oauth',
  routes: [
    {
      path: '/oauth/:provider',
      method: 'GET',
      handler: async (ctx) => Response.redirect(getAuthUrl(ctx.params.provider))
    }
  ]
}

const auth = bloomAuth({
  adapter: drizzleAdapter(db),
  plugins: [oauthPlugin]
})
```